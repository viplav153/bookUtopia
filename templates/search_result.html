 

{% extends 'base.html' %}
{% block content %}


<!-- <link rel="stylesheet" href="/static/style.css"> -->
<div>
    
     
    {% for item in results["results"] %}
   
    <p><img src="{{item.book_cover}}" /></p>
    <p>Title:<i>{{ item.title }}</i></p>
    <p>Author: {{ item.author[2:-2] }}</p>
    <p>ISBN: {{ item.ISBN }}</p>

    {% endfor %}

</div>

<style type="text/css">
  html, body { height: 100%; margin: 0; padding: 0; }
  #map { height: 100%; }
</style>

<body>
<div id="map"></div>

<script type="text/javascript">
  const books = {{ results | tojson }};
  console.log(books.results[0].zipcode);
  function initMap() {
  const sfBayCoords = { lat: 37.601773, lng: -122.202870 };

  const map = new google.maps.Map(document.getElementById('map'), {
    center: sfBayCoords,
    zoom: 8
  });

  const sfMarker = addMarker('static/imgs/marker.png', sfBayCoords, 'SF Bay', map);
  sfMarker.addListener('click', () => alert('Hello!'));


  // Loop over hackbrightLocations to make lots of markers
  const markers = [];
  for (let book of books.results) {
    console.log(book)
    
    // markers.push(addMarker('static/imgs/marker.png', hbLocation.coords, hbLocation.name, map));
  }

  // Loop over markers list to attach click handlers
  for (let marker of markers) {
    const aboutLocation = `<h1>BookLot - ${marker.title}</h1>
      <p>Located at</p>
      <ul>
        <li><b>Lat:</b> ${marker.position.lat()}</li>
        <li><b>Lng:</b> ${marker.position.lng()}</li>
      </ul>
      `;

    addInfoWindowToMarker(aboutLocation, marker, map);
  }

  // Un-comment this to execute code in moreDemos.js
  // initMoreDemosmap);
}


/**
 * Utility/helper functions
 */

function addMarker(icon, position, title, map) {
  const marker = new google.maps.Marker({ position, map, title, icon });

  return marker;
}

function addInfoWindowToMarker(content, marker, map) {
  const infoWindow = new google.maps.InfoWindow({
    content,
    maxWidth: 200
  });

  marker.addListener('click', () => infoWindow.open(map, marker));
}

</script>

<!-- defer & async

  async
  - Don't wait for me, go ahead and read the rest of the doc while I load
  - When I finish loading:
    - Pause reading HTML
    - Execute the code
  * This allows the rest of your page to appear while JS loads


  defer
  - Finish reading all HTML
  - Then execute my code
  * This guarantees that scripts will execute in the order they appear
-->
<!-- <script src="static/js/mapsDemo.js"></script> -->
<!-- <script src="static/js/moreDemos.js"></script> -->
<script async defer
  src={{script_url}}>
</script>
</body>


        
{% endblock %} 

